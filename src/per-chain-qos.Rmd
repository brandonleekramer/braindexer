---
title: "Untitled"
author: "BK"
date: "2024-04-13"
output: html_document
---

```{r setup, include=FALSE}
library("tidyverse")
library("lubridate")
library("plotly")
library("DT")
library("scales")
library("janitor")
library("notionR")
library("onchainR")

source("~/Documents/git/secrets.R")
source("~/Documents/git/braindexer/thegraphR/thegraphR.R")

unix_today = as.numeric(as.POSIXct((as.Date(today(), format="%d/%m/%Y")), format="%Y-%m-%d"))
unix_before_1 = as.numeric(as.POSIXct((as.Date(today(), format="%d/%m/%Y") - 1), format="%Y-%m-%d"))
unix_before_3 = as.numeric(as.POSIXct((as.Date(today(), format="%d/%m/%Y") - 3), format="%Y-%m-%d"))
unix_before_7 = as.numeric(as.POSIXct((as.Date(today(), format="%d/%m/%Y") - 7), format="%Y-%m-%d"))
unix_before_14 = as.numeric(as.POSIXct((as.Date(today(), format="%d/%m/%Y") - 14), format="%Y-%m-%d"))
unix_before_30 = as.numeric(as.POSIXct((as.Date(today(), format="%d/%m/%Y") - 30), format="%Y-%m-%d"))

daily_subgraphs = queryVolumeByDeploymentOverTime(unix_before_3) %>% 
  mutate(braindexer = if_else(deployment_id %in% braindexer_syncing, "Syncing", "Not Syncing"),
         time_period_rank = "4", time_period = "Past 3D") 



```
